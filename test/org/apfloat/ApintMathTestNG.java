package org.apfloat;

import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import static org.testng.Assert.*;
import static org.testng.Assert.assertEquals;

public class ApintMathTestNG {
    @DataProvider
    private static Object[][] binomials() {
        return new Object[][] {
                { 30, 18, new Apint("86493225") },
                { 213, 169, new Apint("8884809363295623040178121688912554786658899300") },
                { 584, 273, new Apint("607696993707210821616454288036909366299067818596101626527902995088513477154382967519716156801484108769468901201343945763465085862188178303143814798116928179471511723916143680") },
                { 2584, 1273, new Apint("86289147225915886691560295593481530268704577351291086400593408523704359318029327265134670369133243003578806128561428235461415909985371264239906532708105525150505137095386344171789591548257404995674599608213195878393031075970972258885492047520944628442035543071767373327480412112422944089291208109455668648801313086448050991697419075197655935444157458334388149537936008920226735477387366529301254539049514812167069955853882639586204735618294547244279771870173047002938853504589093223555275590214349579093034947726748989472438320471716828892466734574367671119601190417482039458394869591593815372308562600935592837204963185289635574156307842822622136942461018589488205878301423952160958105722155115327730285361147083321717874161227383263161222030754343029057850474665172399457280")},
                { 21584, 16273, new Apint("120028598763871390364984437223051387112886066659095393671590902549528437172877238154448001938909281597902120324944461058060227050250519152551837261579434779298620142097697962834313339261227048460886817148439104243718046232926996763263710775595202727880281882051195730339845519809064252915114230446458019862578712307064889156185252406808848762498363995635966065147099314135094200181482363326178956847370456658686347643084732419055263224896510037177191724906695767614829392219221430585570296855808757451930899497193919044849520808141959226771815451802284631092306928122054787574275808570947988561116064893656307870368116470875158941706357924305546206161290783249589621718239160913001118998845100318967573947897370895918605435484229255331432350703111396653952074865097496567010230570718050758572580211136012879683354160168474582996197557091144456807583161107134145314064983608857849524000469966123169627174303869960831542017353216548069554051075268777245624093186811793947375358361417155460926773740737316265889980550033684707775580025888126357022398862664439255827743990685805485889615949705200096252445303186098651562872101700176317455960110677573762574802555185629167219984378934494231298759276531013470644927350574882366523137625772642012270003968446899228515984781569924372331134352847465719111667013864017811300790016302937853650016275100247823075349391308554103603735778005001996538298163108557729905331460786335352650801270009407299717451040420569606532446330114586032775919317578125038701004163687262111831953638044696621793992481169885928965785072628632513613915857605677449956860243517046511057514617579708265940255047973858756680497491139772953236219188266264039463442583340887518495075931179720568448929393223587300323227167434072466451816205852658882436271751947202265821433111291578730523685202359086855101963198090769052013485196081046690256214115750592653239945472903474673726391829984148645649941695139190186231287600224624452256671319514894656032023701259641218820505248574411892790177628096779092442762226093841227115429694507565825665594762482124483810132570635350762420899279310912933794117047786053741194075517985061388009922102276464643216391789282301474071712764638555772841260113723318102782434152681154949938143535391880412350843407431237934442271223082114717219595644540237692019187645483928924232784789621915838970480483262340962336787338580095281263428385740311404588625943326122807929561030206586924518287353868438436191072681494892633168491288621643424576191398025721393478795089873427641651141562964582216978752861442637335178272905832471116344779937033108740642937886655289085294724797971245002127336439875410214824589021268966006291795943685682882850073205653321177185690030885376289195032639771605366772117560779880958606236403702464695155024925028594111759865851938372985064578947250459153694177919365124158219066658644734429405104510896454469591011143879683418585923157870173568259291689659476730631166184512575137872220190831966614921229798915791185760888567568997820581496027057932495787842382629401712848244297380091997756352476654351711556755878647182357168568687059952503565730872054990345389104953974583234285270759804320176628731468773713025739234082029657371137652083928745046385621290122941193439924085045342559013435090996019504747928685151928171056763777144500675645218208079144294086447502565904496082307262780585710889722032447722157959811156301220882331930231080867546829399808219270512708755467159033066760058835527741374787271476440630157378091631652997691794153859175098820323172875064187008552149472368899769168935993945034999450998859681971419132021949616023724531618917278977412425605235076477181463705546138044606954928434983372987710207185459574195977613651970809767937519309604500524535619424727990899142213275606293553989019807141794600762182818964455913646951915998162081647092179431973171795338729457330557820923898645737144703757025961382873563941363786732994787275931478284646145230855457202083018469628929709741275809357744458413387739214830249569607740184260715603166137218005598108886791072570970859203266452259742222640607307836115185980436971899934763220652910678393652377816404172271994493466012133853291144162519415252234690364027097175588993315082367154900971387139908978144201565782266711134153168841453276035824640772483749488617526678951147954008004557860929146743698430771441381328810462982560744915511075036889081104929398753402974564512884890545238121694642732655289152023342701433721348186334946389159982149231107231375862152332124633803272669900906865185678398767345169008932486033845083767570858813558205480125656473508811649934403307844555654554384340713432284973655810867449880938700467109132896067120377901742953957256978177539688399408856285415341074782694256230658611143999502811197111129996170440465897914519311478368033763226084309715553882121077807824821729991614333062730305035421456186994794897191152632313271406109421320235782288290230884356824027360240791677548286776034181430431001231524817097555802358686087447947337503232999293617546052390355002617331866266338490666797082091496350653259314449378604996085576204308873450948967871910520900593284509661414624016299828563757968566841981868323873228443043567119412251947296132674255544320")}
                // This one is just insane:
//                ,
//                { 50000, 25000, new Apint("11278103787751767590540504162143765806781475143790580587582687716101679353389417481829736877372326697550435492562647800716560679704884878880011019009065886331040079367009793499463252376436957749880838411545742004805251013026210907606620413449824972844997988306215097958683380717118916448078992904414296817345162333467371653801998800484753911309405521048921318593149464218906239346822806222329661861858019392578879878349567847055622624790300647936669715877376010840272190075802433291887401494159002474004770924679173222603704581282571957085804760873237402346948990597232949643979138999665770845544964971485448120134331886098813326345779242235444104416155960888728827127475304999842808441842901318187570808524057908015521295870626886668068362124723021743075061821401512464680734404577754900750210373318316364338981759678259889213702707852915780470028410286525378604996432654045842227524800201974413032886390956220591796916249762349160527537228854189375787183295895755686333881190235723161172968950089600695334422418697994227977159859857437585332428029519350670997798659738100619995737918068636793843714973873783718466355934252688644391419148718235041630220282988933290011801403430721954871619358514184242343337077320075540949779881870905899075947917129976424506266300684587478821146647862290146036400364700529323906141626582645200320385668983971998473298147326068699483584821312024364444048271070308666190830134081873590693505104837697958772347236538082320884538059510737020671183001778590655235888510764795631939357338232298244662567042442031578977787946840650085759497770814821418988485441010150989913643995725183957976171082205915823285352292053982495904810364614449863555013234725968650355278396202445582201296335149505063525264049148707357505249718149914237311891295914962566976844658216278801197100153357478570795385413547789993442867640135613035033574867664313540891495465524976069199086289526793997502475281878565159518421424304396703047678536049473691851116580054754900743228788374925897945268369652164305423990683902109758199215359466670073714323553126927594454173694643773098584940878328156021304708833513487392420505566206815441630743886071465081539645959264145554735052144172745629511634944157879200861402095018744428406538982812691673778916486637680167351612826005893573578762052515873183693198642654899115244477816201632727448100244855245760350980289031449063830993534508872159243988304496911593692797506020016113797293900062992204677422183964236570017937898916493248527522223525173936132152843902049787673093301455136970098139456635733655771858366501355581712258158195372815915930574336724764615786665567867382563055566028357318412848225420444641498215296692070694867662774315986959231065269389271792899020997963538652471464416163545932429587798516781809376974528244207368352333667565038683840883306221264825539748103809506124189031039284406352822577337073693628133988000848536730239243991804406351386861801842686705671539867888113463293984210693647365235279260981419063732994374763471344525321634937451872364762573416608813367733183325834522877684809870657805768572548301137160237175079924913182258417278836913386771549203223006172168577383466930938660366643994010483011520435751485619201202834236438516495518875105382491958530579083321123917214366102321481422279493977819431836193184323130727530098264387344615828759513680607187024055724689361491803142323504109846025034793903203201654429439106033781654547293319756978461166994622953346919684613627363008976876153950118468039266791581692419516970022655685673903075734390761170346067567071267886554123120501812191714731207761778881185014619947631919307752947215462532994376422489050031631584547767583557512153197994244935760620840014598494523167954353965012570207684165888375376064450269778030287406631874925612412881050536545354197983284066145504976269634609298458224729027015720810695255911877824267615827210557859227311431069417196928846650689982346908588565101600378017824017004806627866569244776167982920825666759529166403960040887551560753527274869472277256802835865802590175424071191257401264077668876379895723264025846851397006417691724112624389434019250117638501874794985614432561056336486464041218689870556509527517681945577482644039041411395566016108416824655505936275812134491786841707952379875443792183286822334738811379464359908205956493920523103691043945854022848913372914092400645131119384965411726699811770613952721884264642522911509537750911690733250195668114263084165906529018522058535916845058452750589591488069657687663433918965337373783072105313701149687230323702723420442153921504219246460356656908800406367752440524728192266256125652569740908289700341139975469476213385707740582562732261460826533303555568678824395298793442180462594734150851926045002319180224992722210115843667294902289268965527753249818122358254298880133033886783469871706496972911360844707698522686581155670616120832781589177842708898436519107662583061341566588669859930439075701419764743613160899689754314059198734958487604074222207751963338831541307895335654417201121525810226286973664217864518151103467012955653301255681720072398429015673634996968815465171132372699256247414937036142335456943409611506630193448967947283985861142826734789937119084760758749953270145823213084206826776479971768972852588970795000087330424595776491969846833139257069227210456369506423522752712181970293816498606978196356169640383484678107446352605744786604782166169473449075605406421567074597347243453418171985429665589716795275583155384772698109737587296249828848336847309832557686337774749757284496863987260920447694178174212065401845293119663621539419182125104702275534668284240995041829594116864463409342809375919812736892911732139157966624214694443822762509948611238942507398101788495863569903701904468188269096552598316403485178342483519352660675563279338506746662838192654191900448551887531435219951491344032977395633663467408488544349119438992653220866453193549824636505029784244168831246998809632591116247081716632627827739829241947068570594781995685002870269269193690193776101946965545992133418642141424507138430111304559006944984522927604976624954508571050413649468196565000987521264748879231964882819675556900937600422019309580909334523176359758249211055182814190171571048953251529835872950873688053580324852204779062196627920280153014323691496163139952066278224526939862935310499390947346167609542739721364548488410209497664736695915589891733860914527955926439075494876376222997800227881734308955548427636665188876514670933367680127724571270334717514601230319029275737311003965565243978806354949430688931989410172184345407905748600644539260826818278494552894575956475447272561346258489845952313572077594294896003678691324959188793179030963230212358402294556937670570011654629485538105470509659336577869212864589107144616067893200543528680717006582707294865360821564165118860452738412909708747251839318302019957530474777827975898172878447146203288117071463490919070567280329799749811491751762875887973549334627469488192690104810094024216478109715455920076544337815981958183261147829802071286102409599722493174073133572552666121407269317735138244440047809662228945135428131739720196276475225489257516363921180016700051783005365291692236836015947363745326625737572791121373729907853992435462303240783450949246026711583823137476113527450426425696641225609931860188950276039507362339484509635422333402968690162985605881429415444878883010714426626306131628504080795252279153961832376260423028885025569175518798542301520846401352191016511999894084984316561108494055726298592582864918921788952237187119440718476480759385351599645932275941759418487085663121059352836412226981452826148626932187269334158686168139012895482267830793493395256452632531589588795628489944953365480103744971052004008941510371712707898483861999780484936040466662722769225300890870931861166250889214563658166999344049071883040213526592755432387862158866369668406199542834904534865311108642820216089193117705326382978819138524171398283027540315208296565491419982887092653287518607631098994487408076949373966445337064313079959339965816664650189728823868038055482572187437379163668638149929701463305025179881401569646027440445468222114698838651666839853388393102029182818458292617166474050770052233680908932349982267056577165573110203294498905499362679680443492919701269636722572320423338211082707833267105269380507971021460148232774031043164433199406893390235609586094861830159327747636582385430168688279964948756146543308684787243338108948768263724447997287807840193227145411983597696245145252493543791532337874530876261919719509909040691902442303738914799828319321485960916484383431486772887020342082740061520073280933104205626424116285130702120127268569876861274592869484694151633289558110333541631178466207156705857034599642060310174359192309596678343618120403429967852953574032251879193340072224910562090821094300153237921524917748722676559194335163652075023632010074030162748243781693131346136642381806863904745540802042105997496752224479957148493021903734277234603432258830307797289334466072751787495743947141009017936266644662766204778961458053016650658996802580106846309110120830102153682022914509218791998892853837763425054277838429243373580525694230719569615107768689033809078964836952297774000479583829465832793272019138499813745795380254297780797831822368394891593085845149688696832108072304988464426688078061579742175222471800036075943915107353074809557835920943033441491703783883757826849981839180321830881037759934901881780720172797895139436274292789464259413854157228300260282751520066322018032625156943780024182988237391981095700099263704671962026351302403517079654833309930299418203043096426349649414175657120193460439689949682690849309945307795357988951152338823531702224052250899009239478567273096308698618177709902489780352422615025458587273356601145536009051246244159307981655659404758922643488473995069266216405185120231107828887715944796912134028277153145124965907207136662475141416757154465867719006139769519048004551884300956154840186112332283124345927871660715191130622527340338703759942979932234135049327798479446969401216028224379262435812843159257014718289324895739554446653446709799719111830482801400332883210314386118080944956699804020624753858719887342581951518462483658419707664348108071351370319249063371300270286119715113241639112317208701931886398166674985272941325516492031795143173276659482253985715261115712685410750143436473596937469180508932313643728430092305665451884269564973307213143728263275647944132330849746628104622980962760010266434674182104637530919890774460953540283036154614775560653527673664490473505077750454575668129846742389777418340787044030356795039912363403412532390353965239840329338744673716572148708008443659794211397050979952831954694028659181274914903712910934288431928514608639676394700991917458340023628781075415453588411139481298008615117519924902251727843522002869061467247040497327238301321382577493883341103906152462204462073584693197636236498986356846634818922680187603138810079814624579155870971227580506973669434982420270539315269306044456866065812362935393524558192153207589838419822869952928504726280370728435390351980664570946163667269689404902823135685024554220787101907505124539723740284704208438040888135444970129864104646755740859821154201063073037208680311931448489893900859365532549225492892910804852138632280815593434699073778906270063790447412312243144559766828273993450958974382405571789712951731743247627853848160251610478457140774226606652748814478260074466529595753237042418386490137222249985908095622410687704185893513753544027699467081350950028582433674588458071488114003084427807940736282829519364421977416354722680858348598478376302988525441390892813529045923499401780936349890595760855553793102563940127147355212877165618702699076372858490901448521810315609308546565748303633222687418214727025790722044167915954182129007434487081011493039931416496043765249728238742520956105028696392939791696153297505845415741972932674346101214182558572720684175178989732824937854352520449086870662578939626104331745839290155710160005691303418917172750505089716266521899304267935937675299761123422954966404571419631693217764055299590559847554963987095238390623261061388519884964600108613491239892062599421619019251180785301351589911198267187454297767004596247111176768737187815322289706353331844579825707973090799135493541249173979176412824797553684957216862882863385583112858474412807516268065412088107901888557126003148209993224335806237621998888833760684805328115869887804450432159843765678836222157386198729546329085957015250339265031325735291201919273357025005932217446821352334465116023602982839995882695281605483463054365548796353859968670797135943195569989972455362045578095710788711851762378606479097427838113009813839034556091068983073813476608311139740007306376202211221146751043979179380195219279764266984728582651471714791945165106148633614418491806882705417006075867183352660869767900537049725335926316925143484703114229581314287507937332667445010077383108381471598121322191084921006907750149005592010259301291022317183653575648990804185758240934989670382600539281317439281506952605740825523472029278275915020184317793610061236067209694535918152787929041666937330403309230227089574533822415032107207580739359378820547445765886578389669771881234586998467315993250210147396882012519485926592826004016325973970560249719100275068069849432406113261613111816364349353915912439245260393766316672886533245539173263189455993676969682629331952790637299236971189706896387125193106522456620273547214786859552562365253070659848279558684426696404801581682779896032039187989674258951999870272898238461889226715190792518634558000365082318872780992893754206484670233677186735542434510906477064016451646147121659272091576365567088174114153766045184776216190892141958747652353144490809742930231938064081581975922660343943998771616418493246354543834942484393359267076225564030995254871015757623381517184944925707801533602429824337904490504532202584427282199807787752468551597865886570856982539168408609123939828389326656013055514949935557464630197137474329026276725835033570699158099201903458190500666702186070678332103070257293841950602765445767604538646796508785845362298998108024189951155824879066106287671330637699746817584425437017600033345837737026511598221457836044462076363022763186739436482450969903328078611602635282760782994424739821917660968637483750415416060743218835951610871632920107930510407596310709884943468637596345281596757330972513802467942824788593187184487271342853585170274554952214273432847528384414237434688988755481114027666751530379247546550670246600056485514483632330894584903183289155522161636721482375029879636762469609122089869474896031862830949588145137664276956125081746858929331480942248200581070274390571832080514880314035252178369040755026753142458489126873324408551703022184015688493887052911363068194650944021473612989708158911089144176773405757387161758800000858181750949547842379929134266554761739732524876054153727824097527566365332624656899726056853663510857334407454835316699265788760538583109681931359573963991149120") }
        };
    }

    @Test(dataProvider = "binomials")
    public void testCnk(int n, int k, Apint res) throws Exception {
        assertEquals(ApintMath.cnk(n, k), res);
    }

    @DataProvider
    private static Object[][] badBinomials() {
        return new Object[][] {
                { -2,  3 },
                {  2, -3 },
                { -2, -3 }
        };
    }

    @Test(dataProvider = "badBinomials", expectedExceptions = IllegalArgumentException.class)
    public void testBadBinomials(int n, int k) throws Exception {
        ApintMath.cnk(n, k);
    }
}
